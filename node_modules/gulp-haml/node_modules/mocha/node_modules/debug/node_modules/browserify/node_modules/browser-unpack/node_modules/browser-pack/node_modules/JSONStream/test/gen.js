var fs = require('fs')
var JSONStream = require('../')
var file = process.argv[2] || '/tmp/JSONStream-test-large.json'
var size = Number(process.argv[3] || 100000)
if(process.title != 'browser')
require('tape')('out of mem', function (t) {

//////////////////////////////////////////////////////
// Produces a random number between arg1 and arg2
//////////////////////////////////////////////////////
var randomNumber = function (min, max) {
  var number = Math.floor(Math.random() * (max - min + 1) + min);
  return number;
};

//////////////////////////////////////////////////////
// Produces a random string of a length between arg1 and arg2
//////////////////////////////////////////////////////
var randomString = function (min, max) {

  // add several spaces to increase chanses of creating 'words'
  var chars = '      0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
  var result = '';

  var randomLength = randomNumber(min, max);

  for (var i = randomLength; i > 0; --i) {
    result += chars[Ma